<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WANZOFC TECH - API ðŸ”¥</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #0D1117;
      color: #FFFFFF;
      overflow-x: hidden;
      height: auto;
      padding-bottom: 50px;
    }

    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
      top: 0;
      left: 0;
      background-color: #0D1117; /* Latar belakang gelap */
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100px;
      background-color: rgba(0, 255, 159, 0.1); /* Hijau neon transparan */
      color: #00FF9F;
      text-align: center;
      padding: 15px 0;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
      z-index: 100;
      border-bottom: 2px solid #00FF9F;
    }

    main {
      margin-top: 120px;
      position: relative;
      z-index: 1;
    }

    .container-title {
      text-align: center;
      margin-bottom: 10px;
      color: #7928CA; /* Ungu */
    }

    .container {
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
      padding: 20px;
      margin-bottom: 20px;
      transition: transform 0.3s ease, box-shadow 0.3s ease; /* Efek hover yang lebih lengkap */
    }

    .container:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 8px rgba(0, 255, 159, 0.3); /* Efek glow saat hover */
    }

    h1,
    h2 {
      color: #00FF9F; /* Hijau Neon */
      font-weight: 600; /* Lebih tebal */
      margin-bottom: 0.75rem;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6);
      letter-spacing: 0.5px; /* Sedikit spacing */
    }

    button {
      background-color: #FF4F00; /* Oranye */
      color: #FFFFFF;
      transition: background-color 0.3s ease, transform 0.3s ease; /* Efek hover */
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      cursor: pointer;
      font-weight: 500;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    button:hover {
      background-color: #FFFFFF;
      color: #FF4F00;
      transform: scale(1.05); /* Efek zoom kecil */
    }

    #api-endpoints a {
      color: #00FF9F;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    #api-endpoints a:hover {
      color: #FF4F00; /* Oranye */
    }

    .try-it-button {
      background-color: #7928CA; /* Ungu */
      color: #FFFFFF;
      margin-left: 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease;
      padding: 8px 16px;
      font-weight: 500;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .try-it-button:hover {
      background-color: #FF4F00; /* Oranye */
      transform: scale(1.05);
      color: #FFFFFF;
    }

    footer {
      text-align: center;
      padding: 20px;
      color: #00FF9F;
      background-color: rgba(0, 255, 159, 0.1); /* Hijau neon transparan */
      position: relative;
      z-index: 1;
      margin-top: 50px;
      border-top: 2px solid #00FF9F;
    }

    #api-response {
      white-space: pre-wrap;
      word-break: break-all;
      color: #FFFFFF;
      padding: 15px;
      border: 1px solid rgba(0, 255, 159, 0.2); /* Hijau neon border */
      border-radius: 8px;
      background-color: rgba(0, 0, 0, 0.2);
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .stat-box {
      text-align: center;
      padding: 20px;
      border: 1px solid rgba(0, 255, 159, 0.2); /* Hijau neon border */
      border-radius: 8px;
      margin-bottom: 20px;
      background-color: rgba(0, 0, 0, 0.2); /* Latar belakang lebih gelap */
    }

    .stat-value {
      font-size: 2.5em; /* Lebih besar */
      font-weight: 700; /* Lebih tebal */
      color: #00FF9F; /* Hijau Neon */
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7); /* Bayangan lebih kuat */
      letter-spacing: 1px; /* Spacing lebih lebar */
    }

    .endpoint-list {
        list-style: none;
        padding: 0;
    }

    .endpoint-list li {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid rgba(0, 255, 159, 0.2);
        border-radius: 8px;
        background-color: rgba(0, 0, 0, 0.2);
    }

    .endpoint-description {
        font-size: 0.9rem;
        color: #ccc;
        margin-bottom: 10px;
    }

    .endpoint-url {
        font-size: 1rem;
        color: #00FF9F;
        margin-bottom: 5px;
    }

    .param-input {
        background-color: rgba(255, 255, 255, 0.05);
        color: #fff;
        border: 1px solid rgba(0, 255, 159, 0.2);
        border-radius: 4px;
        padding: 5px;
        margin-right: 5px;
        width: 200px; /* Lebar input */
    }

    .copy-url-button {
        background-color: #FF4F00;
        color: #fff;
        border: none;
        border-radius: 4px;
        padding: 5px 10px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: background-color 0.3s ease;
    }

    .copy-url-button:hover {
        background-color: #fff;
        color: #FF4F00;
    }

    .loading-indicator {
        display: none;
        margin-left: 10px;
    }

    .loading-indicator.active {
        display: inline-block;
    }

  </style>
</head>

<body>
  <audio id="bg-music" src="https://files.catbox.moe/irf66d.mp3" autoplay loop></audio>
  <div id="particles-js"></div>
  <header class="text-center">
    <h1>WANZOFC TECH</h1>
    <p>HANYA GABUT</p>
  </header>

  <main class="container">
    <div class="row">
      <div class="col-md-4">
        <div class="container stat-box">
          <h2 class="container-title">Total Requests</h2>
          <div id="total-requests" class="stat-value">Loading...</div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="container stat-box">
          <h2 class="container-title">Total Visitors</h2>
          <div id="total-visitors" class="stat-value">Loading...</div>
          <div id="average-battery"></div>
        </div>
      </div>

      <div class="col-md-4">
        <div id="api-key-container" class="container">
          <h2 class="container-title">API Key</h2>
          <p id="api-key-display">Loading API Key...</p>
        </div>
      </div>
    </div>
  </main>

  <main class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="container">
          <h2 class="container-title">API Endpoints</h2>
          <ul class="endpoint-list">
             <li>
                <div class="endpoint-description">
                    Get GitHub User Information. Requires a username.
                </div>
                <div class="endpoint-url">
                    <a href="#" data-endpoint="/api/stalk/github">
                      <i class="fab fa-github"></i> /api/stalk/github
                    </a>
                </div>
                <label for="github-user">Username:</label>
                <input type="text" class="param-input" id="github-user" placeholder="Enter username" data-param="user">
                <button class="try-it-button btn btn-primary" data-base-endpoint="/api/stalk/github">
                    <i class="fas fa-flask"></i> Try It
                    <span class="loading-indicator">Loading...</span>
                </button>
                <button class="copy-url-button" data-base-url="/api/stalk/github">
                    <i class="fas fa-copy"></i> Copy URL
                </button>
            </li>
            <li>
                <div class="endpoint-description">
                    Download TikTok video. Requires a TikTok video URL.
                </div>
                <div class="endpoint-url">
                    <a href="#" data-endpoint="/api/d/tiktok">
                      <i class="fab fa-tiktok"></i> /api/d/tiktok
                    </a>
                </div>
                <label for="tiktok-url">TikTok URL:</label>
                <input type="text" class="param-input" id="tiktok-url" placeholder="Enter TikTok URL" data-param="url">
                <button class="try-it-button btn btn-primary" data-base-endpoint="/api/d/tiktok">
                    <i class="fas fa-flask"></i> Try It
                    <span class="loading-indicator">Loading...</span>
                </button>
                <button class="copy-url-button" data-base-url="/api/d/tiktok">
                    <i class="fas fa-copy"></i> Copy URL
                </button>
            </li>
            <li>
                <div class="endpoint-description">
                    Stalk a YouTube channel. Requires a YouTube channel username.
                </div>
                <div class="endpoint-url">
                    <a href="#" data-endpoint="/api/stalk/youtube">
                        <i class="fab fa-youtube"></i> /api/stalk/youtube
                    </a>
                </div>
                <label for="youtube-username">YouTube Username:</label>
                <input type="text" class="param-input" id="youtube-username" placeholder="Enter YouTube username" data-param="username">
                <button class="try-it-button btn btn-primary" data-base-endpoint="/api/stalk/youtube">
                    <i class="fas fa-flask"></i> Try It
                    <span class="loading-indicator">Loading...</span>
                </button>
                <button class="copy-url-button" data-base-url="/api/stalk/youtube">
                    <i class="fas fa-copy"></i> Copy URL
                </button>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </main>

  <main class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="container">
          <h2 class="container-title">API Response</h2>
          <div id="api-response"></div>
        </div>
      </div>
    </div>
  </main>

  <footer>
     WANZOFC TECH
  </footer>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

  <script>
    $(document).ready(function() {
      const apiKeyDisplay = $('#api-key-display');
      const tryItButtons = $('.try-it-button');
      const apiResponseDiv = $('#api-response');
      const totalRequestsDiv = $('#total-requests');
      const totalVisitorsDiv = $('#total-visitors');
      const averageBatteryDiv = $('#average-battery'); // div untuk tampilan rata-rata baterai
      let batteryLevels = [];

      async function getApiKey() {
        try {
          const response = await fetch('/api/stalk/github?username=your_username');
          const data = await response.json();
          if (data.result && data.apikey) {
            apiKeyDisplay.text(`API Key: ${data.apikey}`);
          } else {
            apiKeyDisplay.text(`Error: ${data.message}`);
          }
        } catch (error) {
          apiKeyDisplay.text(`Error: ${error.message}`);
        }
      }

      getApiKey();

      // Function untuk membuat URL berdasarkan input dan base URL
        function buildUrl(base, inputs) {
            let url = base + '?';
            let params = [];
            for (const key in inputs) {
                if (inputs[key]) {
                    params.push(`${key}=${encodeURIComponent(inputs[key])}`);
                }
            }
            url += params.join('&');
            return url;
        }

           // Event listener untuk tombol "Copy URL"
        $('.copy-url-button').on('click', function(event) {
            const baseUrl = $(this).data('base-url');
            const listItem = $(this).closest('li');
            const inputs = {};

            listItem.find('.param-input').each(function() {
                const param = $(this).data('param');
                inputs[param] = $(this).val();
            });

            const url = buildUrl(baseUrl, inputs);

            navigator.clipboard.writeText(url).then(() => {
                alert('URL copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy URL: ', err);
            });
        });

      tryItButtons.on('click', function(event) {
          const baseEndpoint = $(this).data('base-endpoint');
            const listItem = $(this).closest('li');
            const inputs = {};

            listItem.find('.param-input').each(function() {
                const param = $(this).data('param');
                inputs[param] = $(this).val();
            });

            const endpoint = buildUrl(baseEndpoint, inputs);

            fetchApiResponse(endpoint);
        });
         // Umum: Fungsi untuk menampilkan/menyembunyikan loading indicator
        function setLoading(button) {
          const isLoading = true
            const loadingIndicator = $(button).find('.loading-indicator');
            if (isLoading) {
                loadingIndicator.addClass('active');
            } else {
                loadingIndicator.removeClass('active');
            }
        }

         // Modifikasi fungsi fetchApiResponse untuk menggunakan setLoading
         async function fetchApiResponse(endpoint) {
             const button = $(`[data-base-endpoint='${endpoint}']`);
             setLoading(button, true); // Menampilkan loading indicator
            try {
                const response = await fetch(endpoint);
                const data = await response.text(); // Ambil response sebagai text
                apiResponseDiv.text(data); // Tampilkan sebagai text
            } catch (error) {
                apiResponseDiv.text(`Error: ${error}`);
            } finally {
                 setLoading(button, false);
                //setLoading(tryItButtons, false); // Menyembunyikan loading indicator
            }
        }
       // Fungsi untuk mendapatkan data statistik secara real-time
       function updateStatistics() {
            $.ajax({
                url: '/api/statistics',  // Endpoint API untuk mendapatkan statistik
                type: 'GET',
                dataType: 'json',
                success: function(data) {
                    totalRequestsDiv.text(data.totalRequests);
                    totalVisitorsDiv.text(data.totalVisitors);
                },
                error: function(xhr, status, error) {
                    console.error('Failed to fetch statistics. Status:', status, error);
                }
            });
        }

        // Update statistik setiap beberapa detik (misalnya, 5 detik)
        setInterval(updateStatistics, 5000);
        updateStatistics(); // Panggil sekali saat halaman dimuat

       // Fungsi untuk mendapatkan informasi baterai
       async function getBatteryLevel() {
            try {
                const battery = await navigator.getBattery();
                const level = battery.level * 100;
                batteryLevels.push(level);
                sendBatteryLevel(level); // Kirim level baterai ke backend
                updateAverageBattery(); // update tampilan rata-rata
            } catch (error) {
                console.error('Error getting battery level:', error);
                averageBatteryDiv.text('Battery info not available.');
            }
        }

        // Fungsi untuk mengirim level baterai ke backend
        function sendBatteryLevel(level) {
            $.ajax({
                url: '/api/battery-level',
                type: 'POST',
                contentType': 'application/json',
                data: JSON.stringify({ batteryLevel: level }),
                success: function(response) {
                    console.log('Battery level sent successfully:', response);
                },
                error: function(xhr, status, error) {
                    console.error('Failed to send battery level. Status:', status, error);
                }
            });
        }

      // Fungsi untuk menghitung dan menampilkan rata-rata persentase baterai
      function updateAverageBattery() {
          if (batteryLevels.length === 0) {
              averageBatteryDiv.text('No battery data available.');
              return;
          }

          const sum = batteryLevels.reduce((acc, val) => acc + val, 0);
          const average = sum / batteryLevels.length;

          averageBatteryDiv.text(`Average Battery: ${average.toFixed(2)}%`);
      }

      // Dapatkan level baterai saat halaman dimuat
      if (navigator.getBattery) {
          getBatteryLevel();
      } else {
          averageBatteryDiv.text('Battery API not supported.');
      }

    });

    particlesJS('particles-js', {
      "particles": {
        "number": {
          "value": 100,
          "density": {
            "enable": true,
            "value_area": 800
          }
        },
        "color": {
          "value": "#00FF9F" /* Warna partikel Hijau Neon */
        },
        "shape": {
          "type": "circle",
          "stroke": {
            "width": 0,
            "color": "#000000"
          },
          "polygon": {
            "nb_sides": 5
          },
          "image": {
            "src": "img/github.svg",
            "width": 100,
            "height": 100
          }
        },
        "opacity": {
          "value": 0.7,
          "random": true,
          "anim": {
            "enable": true,
            "speed": 0.7,
            "opacity_min": 0.1,
            "sync": false
          }
        },
        "size": {
          "value": 3,
          "random": true,
          "anim": {
            "enable": false,
            "speed": 40,
            "size_min": 0.1,
            "sync": false
          }
        },
        "line_linked": {
          "enable": true,
          "distance": 150,
          "color": "#00FF9F", /* Warna garis Hijau Neon */
          "opacity": 0.4,
          "width": 1
        },
        "move": {
          "enable": true,
          "speed": 5,
          "direction": "none",
          "random": false,
          "straight": false,
          "out_mode": "out",
          "attract": {
            "enable": false,
            "rotateX": 600,
            "rotateY": 1200
          }
        }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": {
          "onhover": {
            "enable": true,
            "mode": "grab"
          },
          "onclick": {
            "enable": true,
            "mode": "push"
          },
          "resize": true
        },
        "modes": {
          "grab": {
            "distance": 140,
            "line_linked": {
              "opacity": 1
            }
          },
          "bubble": {
            "distance": 400,
            "size": 40,
            "duration": 2,
            "opacity": 8,
            "speed": 3
          },
          "repulse": {
            "distance": 200
          },
          "push": {
            "particles_nb": 4
          },
          "remove": {
            "particles_nb": 2
          }
        }
      },
      "retina_detect": true,
    });

    gsap.from("header", {
      duration: 1,
      y: -100,
      opacity: 0,
      ease: "power2.out"
    });
    gsap.from("main", {
      duration: 1,
      opacity: 0,
      delay: 0.5,
      ease: "power2.out"
    });
    gsap.from("footer", {
      duration: 1,
      y: 100,
      opacity: 0,
      delay: 1,
      ease: "power2.out"
    });

    // Animasi GSAP tambahan
    gsap.utils.toArray(".container").forEach(container => {
      gsap.from(container, {
        duration: 1,
        opacity: 0,
        y: 50,
        delay: 0.3,
        ease: "power3.out",
        scrollTrigger: {
          trigger: container,
          start: "top 80%",
          end: "bottom 20%",
          markers: false,
          toggleActions: "restart pause resume reset"
        }
      });
    });
  </script>
</body>
</html>
